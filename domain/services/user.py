################################################################################################################################
## Import Library
################################################################################################################################

from abc import (
    ABC,
    abstractmethod
)
from sqlalchemy.orm import Session
from repositories import user

################################################################################################################################
################################################################################################################################
## Interface | Port
################################################################################################################################
################################################################################################################################

class UserService(ABC):
    @abstractmethod
    async def get_users(self):
        raise NotImplementedError()
    
    @abstractmethod
    async def get_user_by_id(self, id: int):
        raise NotImplementedError()

################################################################################################################################
################################################################################################################################
## Adapter
################################################################################################################################
################################################################################################################################
class __Userservice(UserService):
    def __init__(self, session: Session) -> None:
        self.userRepo = user.NewUserRepositoryDB(session)
    
    async def get_users(self):
        data = await self.userRepo.get_all()
        return data
    
    async def get_user_by_id(self, id: int):
        data = await self.userRepo.get_by_id(id)
        return data

def UerService(session: Session) -> UserService:
    return __Userservice(session=session)